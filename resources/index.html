<!doctype html>
<html>

<head>
    <style>
        #myProgress {
            width: 100%;
            background-color: #ddd;
        }

        #myBar {
            width: 0%;
            height: 30px;
            background-color: #4CAF50;
            text-align: center;
            line-height: 30px;
            color: white;
        }
    </style>
</head>

<body>
    <p id="ticks"></p>
    <button onclick="external.invoke('download')">download</button>
    <button onclick="external.invoke('exit')">exit</button>
    <script type="text/javascript">
        function downloadProgress(v, total, downloaded) {
            var elem = document.getElementById("myBar");   
            var progress = Math.ceil(downloaded / total * 100);
            elem.style.width = progress + '%'; 
            elem.innerHTML = progress * 1  + '%';
            document.getElementById('ticks').innerHTML = 'Download Progress for Rainway ' + v;
        }
        function downloadFailed(e) {
            document.getElementById('ticks').innerHTML = 'Download failed! ' + e;
        }
        function downloadComplete(e) {
            document.getElementById('ticks').innerHTML = 'Download Done! Verifying the update... ' + e;
            external.invoke('verify')
        }


        function verificationComplete(e) {
            document.getElementById('ticks').innerHTML = 'Verified the update! Installing...';
            external.invoke('apply')

        }
        function verificationFailed(e) {
            document.getElementById('ticks').innerHTML = e;
        }

        function updateComplete(e) {
            document.getElementById('ticks').innerHTML = 'Rainway Installed/Updated! Closing...';
            setTimeout(
                function () {
                    external.invoke('launch')
                }, 2500);

        }
        function updateFailed(e) {
            document.getElementById('ticks').innerHTML = e;
        }

        function updateTicks(n) {
            document.getElementById('ticks').innerHTML = 'ticks ' + n;
        }
        function test(n) {
            document.getElementById('ticks').innerHTML = 'ticks ' + n;
        }
    </script>

    <div id="myProgress">
        <div id="myBar">0%</div>
    </div>
</body>

</html>